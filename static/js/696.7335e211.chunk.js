"use strict";(self.webpackChunkezyview=self.webpackChunkezyview||[]).push([[696],{696:function(e,t,r){r.r(t),r.d(t,{VOXData3DTexture:function(){return l},VOXLoader:function(){return s},VOXMesh:function(){return f}});var n=r(5671),a=r(3144),i=r(136),o=r(9388),u=r(3272),s=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"load",value:function(e,t,r,n){var a=this,i=new u.hH6(a.manager);i.setPath(a.path),i.setResponseType("arraybuffer"),i.setRequestHeader(a.requestHeader),i.load(e,(function(r){try{t(a.parse(r))}catch(i){n?n(i):console.error(i),a.manager.itemError(e)}}),r,n)}},{key:"parse",value:function(e){var t=new DataView(e),r=t.getUint32(0,!0),n=t.getUint32(4,!0);if(542658390===r&&150===n){for(var a,i=[0,4294967295,4291624959,4288282623,4284940287,4281597951,4278255615,4294954239,4291611903,4288269567,4284927231,4281584895,4278242559,4294941183,4291598847,4288256511,4284914175,4281571839,4278229503,4294928127,4291585791,4288243455,4284901119,4281558783,4278216447,4294915071,4291572735,4288230399,4284888063,4281545727,4278203391,4294902015,4291559679,4288217343,4284875007,4281532671,4278190335,4294967244,4291624908,4288282572,4284940236,4281597900,4278255564,4294954188,4291611852,4288269516,4284927180,4281584844,4278242508,4294941132,4291598796,4288256460,4284914124,4281571788,4278229452,4294928076,4291585740,4288243404,4284901068,4281558732,4278216396,4294915020,4291572684,4288230348,4284888012,4281545676,4278203340,4294901964,4291559628,4288217292,4284874956,4281532620,4278190284,4294967193,4291624857,4288282521,4284940185,4281597849,4278255513,4294954137,4291611801,4288269465,4284927129,4281584793,4278242457,4294941081,4291598745,4288256409,4284914073,4281571737,4278229401,4294928025,4291585689,4288243353,4284901017,4281558681,4278216345,4294914969,4291572633,4288230297,4284887961,4281545625,4278203289,4294901913,4291559577,4288217241,4284874905,4281532569,4278190233,4294967142,4291624806,4288282470,4284940134,4281597798,4278255462,4294954086,4291611750,4288269414,4284927078,4281584742,4278242406,4294941030,4291598694,4288256358,4284914022,4281571686,4278229350,4294927974,4291585638,4288243302,4284900966,4281558630,4278216294,4294914918,4291572582,4288230246,4284887910,4281545574,4278203238,4294901862,4291559526,4288217190,4284874854,4281532518,4278190182,4294967091,4291624755,4288282419,4284940083,4281597747,4278255411,4294954035,4291611699,4288269363,4284927027,4281584691,4278242355,4294940979,4291598643,4288256307,4284913971,4281571635,4278229299,4294927923,4291585587,4288243251,4284900915,4281558579,4278216243,4294914867,4291572531,4288230195,4284887859,4281545523,4278203187,4294901811,4291559475,4288217139,4284874803,4281532467,4278190131,4294967040,4291624704,4288282368,4284940032,4281597696,4278255360,4294953984,4291611648,4288269312,4284926976,4281584640,4278242304,4294940928,4291598592,4288256256,4284913920,4281571584,4278229248,4294927872,4291585536,4288243200,4284900864,4281558528,4278216192,4294914816,4291572480,4288230144,4284887808,4281545472,4278203136,4294901760,4291559424,4288217088,4284874752,4281532416,4278190318,4278190301,4278190267,4278190250,4278190216,4278190199,4278190165,4278190148,4278190114,4278190097,4278251008,4278246656,4278237952,4278233600,4278224896,4278220544,4278211840,4278207488,4278198784,4278194432,4293787648,4292673536,4290445312,4289331200,4287102976,4285988864,4283760640,4282646528,4280418304,4279304192,4293848814,4292730333,4290493371,4289374890,4287137928,4286019447,4283782485,4282664004,4280427042,4279308561],o=8,u=[];o<t.byteLength;){for(var s="",f=0;f<4;f++)s+=String.fromCharCode(t.getUint8(o++));var l=t.getUint32(o,!0);if(o+=4,o+=4,"SIZE"===s){var v=t.getUint32(o,!0);o+=4;var c=t.getUint32(o,!0);o+=4;var h=t.getUint32(o,!0);o+=4,a={palette:i,size:{x:v,y:c,z:h}},u.push(a),o+=l-12}else if("XYZI"===s){var y=t.getUint32(o,!0);o+=4,a.data=new Uint8Array(e,o,4*y),o+=4*y}else if("RGBA"===s){for(var p=[0],g=0;g<256;g++)p[g+1]=t.getUint32(o,!0),o+=4;a.palette=p}else o+=l}return u}console.error("Not a valid VOX file")}}]),r}(u.aNw),f=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(e){(0,n.Z)(this,r);var a=e.data,i=e.size,o=e.palette,s=[],f=[],l=[0,0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1],v=[1,0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0],c=[0,0,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1],h=[0,0,0,0,1,0,1,0,0,1,1,0,1,0,0,0,1,0],y=[0,0,1,0,0,0,1,0,1,1,0,0,1,0,1,0,0,0],p=[0,1,1,1,1,1,0,1,0,1,1,0,0,1,0,1,1,1];function g(e,t,r,n,a,o,u){t-=i.x/2,r-=i.z/2,n+=i.y/2;for(var l=0;l<18;l+=3)s.push(e[l+0]+t,e[l+1]+r,e[l+2]+n),f.push(a,o,u)}for(var w=i.x,d=i.x*i.y,U=new Uint8Array(i.x*i.y*i.z),Z=0;Z<a.length;Z+=4){U[a[Z+0]+a[Z+1]*w+a[Z+2]*d]=255}for(var x=!1,m=0;m<a.length;m+=4){var z=a[m+0],k=a[m+1],A=a[m+2],b=o[a[m+3]],V=(b>>0&255)/255,C=(b>>8&255)/255,X=(b>>16&255)/255;(V>0||C>0||X>0)&&(x=!0);var D=z+k*w+A*d;0!==U[D+1]&&z!==i.x-1||g(v,z,A,-k,V,C,X),0!==U[D-1]&&0!==z||g(l,z,A,-k,V,C,X),0!==U[D+w]&&k!==i.y-1||g(h,z,A,-k,V,C,X),0!==U[D-w]&&0!==k||g(c,z,A,-k,V,C,X),0!==U[D+d]&&A!==i.z-1||g(p,z,A,-k,V,C,X),0!==U[D-d]&&0!==A||g(y,z,A,-k,V,C,X)}var O=new u.u9r;O.setAttribute("position",new u.a$l(s,3)),O.computeVertexNormals();var T=new u.Wid;return x&&(O.setAttribute("color",new u.a$l(f,3)),T.vertexColors=!0),t.call(this,O,T)}return(0,a.Z)(r)}(u.Kj0),l=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(e){var a;(0,n.Z)(this,r);for(var i=e.data,o=e.size,s=o.x,f=o.x*o.y,l=new Uint8Array(o.x*o.y*o.z),v=0;v<i.length;v+=4){l[i[v+0]+i[v+1]*s+i[v+2]*f]=255}return(a=t.call(this,l,o.x,o.y,o.z)).format=u.hEm,a.minFilter=u.TyD,a.magFilter=u.wem,a.unpackAlignment=1,a.needsUpdate=!0,a}return(0,a.Z)(r)}(u.JUT)}}]);