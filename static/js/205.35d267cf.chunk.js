"use strict";(self.webpackChunkezyvuefree=self.webpackChunkezyvuefree||[]).push([[205],{8205:function(t,e,r){r.r(e),r.d(e,{VTKLoader:function(){return u}});var a=r(5671),n=r(3144),s=r(136),i=r(9388),o=r(3272),l=r(2038),u=function(t){(0,s.Z)(r,t);var e=(0,i.Z)(r);function r(t){return(0,a.Z)(this,r),e.call(this,t)}return(0,n.Z)(r,[{key:"load",value:function(t,e,r,a){var n=this,s=new o.hH6(n.manager);s.setPath(n.path),s.setResponseType("arraybuffer"),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(t,(function(r){try{e(n.parse(r))}catch(s){a?a(s):console.error(s),n.manager.itemError(t)}}),r,a)}},{key:"parse",value:function(t){function e(t,e){var r=t.length,a=new Float32Array(r+e.length);return a.set(t),a.set(e,r),a}function r(t,e){var r=t.length,a=new Int32Array(r+e.length);return a.set(t),a.set(e,r),a}var a=new TextDecoder,n=a.decode(new Uint8Array(t,0,250)).split("\n");return-1!==n[0].indexOf("xml")?function(t){function a(t){for(var e="undefined"!==typeof Uint8Array?Uint8Array:Array,r=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)r[a.charCodeAt(n)]=n;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i,o,l="="===t[s-2]?2:"="===t[s-1]?1:0,u=new e(3*s/4-l),f=l>0?s-4:s,p=0;for(i=0,o=0;i<f;i+=4,o+=3){var v=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)];u[p++]=(16711680&v)>>16,u[p++]=(65280&v)>>8,u[p++]=255&v}if(2===l){var A=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4;u[p++]=255&A}else if(1===l){var h=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2;u[p++]=h>>8&255,u[p++]=255&h}return u}function n(t,n){var i,o,u=0;if("UInt64"===s.attributes.header_type?u=8:"UInt32"===s.attributes.header_type&&(u=4),"binary"===t.attributes.format&&n){"Float32"===t.attributes.type?i=new Float32Array:"Int32"!==t.attributes.type&&"Int64"!==t.attributes.type||(i=new Int32Array);for(var f=t["#text"],p=a(Array.isArray(f)?f[0]:f),v=p[0],A=1;A<u-1;A++)v|=p[A]<<8*A;var h=(v+3)*u,d=[],y=h+=h%3>0?3-h%3:0;d.push(y);for(var c=3*u,x=0;x<v;x++){for(var b=p[x*u+c],w=1;w<u-1;w++)b|=p[x*u+c+w]<<8*w;y+=b,d.push(y)}for(var I=0;I<d.length-1;I++)o=l.HT(p.slice(d[I],d[I+1])).buffer,"Float32"===t.attributes.type?i=e(i,o=new Float32Array(o)):"Int32"!==t.attributes.type&&"Int64"!==t.attributes.type||(i=r(i,o=new Int32Array(o)));delete t["#text"],"Int64"===t.attributes.type&&"binary"===t.attributes.format&&(i=i.filter((function(t,e){if(e%2!==1)return!0})))}else o="binary"!==t.attributes.format||n?t["#text"]?t["#text"].split(/\s+/).filter((function(t){if(""!==t)return t})):new Int32Array(0).buffer:(o=a(t["#text"])).slice(u).buffer,delete t["#text"],"Float32"===t.attributes.type?i=new Float32Array(o):"Int32"===t.attributes.type?i=new Int32Array(o):"Int64"===t.attributes.type&&(i=new Int32Array(o),"binary"===t.attributes.format&&(i=i.filter((function(t,e){if(e%2!==1)return!0}))));return i}var s=function t(e){var r={};if(1===e.nodeType){if(e.attributes&&e.attributes.length>0){r.attributes={};for(var a=0;a<e.attributes.length;a++){var n=e.attributes.item(a);r.attributes[n.nodeName]=n.nodeValue.trim()}}}else 3===e.nodeType&&(r=e.nodeValue.trim());if(e.hasChildNodes())for(var s=0;s<e.childNodes.length;s++){var i=e.childNodes.item(s),o=i.nodeName;if("undefined"===typeof r[o]){var l=t(i);""!==l&&(r[o]=l)}else{if("undefined"===typeof r[o].push){var u=r[o];r[o]=[u]}var f=t(i);""!==f&&r[o].push(f)}}return r}((new DOMParser).parseFromString(t,"application/xml").documentElement),i=[],u=[],f=[];if(s.PolyData){for(var p=s.PolyData.Piece,v=s.attributes.hasOwnProperty("compressor"),A=["PointData","Points","Strips","Polys"],h=0,d=A.length;h<d;){var y=p[A[h]];if(y&&y.DataArray){for(var c=void 0,x=0,b=(c=Array.isArray(y.DataArray)?y.DataArray:[y.DataArray]).length;x<b;)"#text"in c[x]&&c[x]["#text"].length>0&&(c[x].text=n(c[x],v)),x++;switch(A[h]){case"PointData":var w=parseInt(p.attributes.NumberOfPoints),I=y.attributes.Normals;if(w>0)for(var g=0,m=c.length;g<m;g++)if(I===c[g].attributes.Name){var T=c[g].attributes.NumberOfComponents;(u=new Float32Array(w*T)).set(c[g].text,0)}break;case"Points":var D=parseInt(p.attributes.NumberOfPoints);if(D>0){var O=y.DataArray.attributes.NumberOfComponents;(i=new Float32Array(D*O)).set(y.DataArray.text,0)}break;case"Strips":var F=parseInt(p.attributes.NumberOfStrips);if(F>0){var C=new Int32Array(y.DataArray[0].text.length),P=new Int32Array(y.DataArray[1].text.length);C.set(y.DataArray[0].text,0),P.set(y.DataArray[1].text,0);var N=F+C.length;f=new Uint32Array(3*N-9*F);for(var S=0,E=0,L=F;E<L;E++){for(var U=[],k=0,R=P[E],_=0;k<R-_;k++)U.push(C[k]),E>0&&(_=P[E-1]);for(var G=0,H=P[E],V=0;G<H-V-2;G++)G%2?(f[S++]=U[G],f[S++]=U[G+2],f[S++]=U[G+1]):(f[S++]=U[G],f[S++]=U[G+1],f[S++]=U[G+2]),E>0&&(V=P[E-1])}}break;case"Polys":var Y=parseInt(p.attributes.NumberOfPolys);if(Y>0){var Z=new Int32Array(y.DataArray[0].text.length),$=new Int32Array(y.DataArray[1].text.length);Z.set(y.DataArray[0].text,0),$.set(y.DataArray[1].text,0);var q=Y+Z.length;f=new Uint32Array(3*q-9*Y);for(var z=0,M=0,j=0,K=0,W=Y;j<W;){for(var B=[],J=0,Q=$[j];J<Q-K;)B.push(Z[M++]),J++;for(var X=1;X<Q-K-1;)f[z++]=B[0],f[z++]=B[X],f[z++]=B[X+1],X++;K=$[++j-1]}}}}h++}var tt=new o.u9r;return tt.setIndex(new o.TlE(f,1)),tt.setAttribute("position",new o.TlE(i,3)),u.length===i.length&&tt.setAttribute("normal",new o.TlE(u,3)),tt}throw new Error("Unsupported DATASET type")}(a.decode(t)):n[2].includes("ASCII")?function(t){var e,r=[],a=[],n=[],s=[],i=/^[^\d.\s-]+/,l=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,u=/^(\d+)\s+([\s\d]*)/,f=/^POINTS /,p=/^POLYGONS /,v=/^TRIANGLE_STRIPS /,A=/^POINT_DATA[ ]+(\d+)/,h=/^CELL_DATA[ ]+(\d+)/,d=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,y=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,c=!1,x=!1,b=!1,w=!1,I=!1,g=!1,m=!1,T=t.split("\n");for(var D in T){var O=T[D].trim();if(0===O.indexOf("DATASET")){var F=O.split(" ")[1];if("POLYDATA"!==F)throw new Error("Unsupported DATASET type: "+F)}else if(c)for(;null!==(e=l.exec(O))&&null===i.exec(O);){var C=parseFloat(e[1]),P=parseFloat(e[2]),N=parseFloat(e[3]);a.push(C,P,N)}else if(x){if(null!==(e=u.exec(O))){var S=parseInt(e[1]),E=e[2].split(/\s+/);if(S>=3)for(var L=parseInt(E[0]),U=1,k=0;k<S-2;++k){var R=parseInt(E[U]),_=parseInt(E[U+1]);r.push(L,R,_),U++}}}else if(b){if(null!==(e=u.exec(O))){var G=parseInt(e[1]),H=e[2].split(/\s+/);if(G>=3)for(var V=0;V<G-2;V++)if(V%2===1){var Y=parseInt(H[V]),Z=parseInt(H[V+2]),$=parseInt(H[V+1]);r.push(Y,Z,$)}else{var q=parseInt(H[V]),z=parseInt(H[V+1]),M=parseInt(H[V+2]);r.push(q,z,M)}}}else if(w||I)if(g)for(;null!==(e=l.exec(O))&&null===i.exec(O);){var j=parseFloat(e[1]),K=parseFloat(e[2]),W=parseFloat(e[3]);n.push(j,K,W)}else if(m)for(;null!==(e=l.exec(O))&&null===i.exec(O);){var B=parseFloat(e[1]),J=parseFloat(e[2]),Q=parseFloat(e[3]);s.push(B,J,Q)}null!==p.exec(O)?(x=!0,c=!1,b=!1):null!==f.exec(O)?(x=!1,c=!0,b=!1):null!==v.exec(O)?(x=!1,c=!1,b=!0):null!==A.exec(O)?(w=!0,c=!1,x=!1,b=!1):null!==h.exec(O)?(I=!0,c=!1,x=!1,b=!1):null!==d.exec(O)?(g=!0,m=!1,c=!1,x=!1,b=!1):null!==y.exec(O)&&(m=!0,g=!1,c=!1,x=!1,b=!1)}var X=new o.u9r;if(X.setIndex(r),X.setAttribute("position",new o.a$l(a,3)),s.length===a.length&&X.setAttribute("normal",new o.a$l(s,3)),n.length!==r.length)n.length===a.length&&X.setAttribute("color",new o.a$l(n,3));else{var tt=(X=X.toNonIndexed()).attributes.position.count/3;if(n.length===3*tt){for(var et=[],rt=0;rt<tt;rt++){var at=n[3*rt+0],nt=n[3*rt+1],st=n[3*rt+2];et.push(at,nt,st),et.push(at,nt,st),et.push(at,nt,st)}X.setAttribute("color",new o.a$l(et,3))}}return X}(a.decode(t)):function(t){var e,r,a=new Uint8Array(t),n=new DataView(t),s=[],i=[],l=[],u=0;function f(t,e){for(var r=e,a=t[r],n=[];10!==a;)n.push(String.fromCharCode(a)),a=t[++r];return{start:e,end:r,next:r+1,parsedString:n.join("")}}for(;;){if(0===(r=(e=f(a,u)).parsedString).indexOf("DATASET")){var p=r.split(" ")[1];if("POLYDATA"!==p)throw new Error("Unsupported DATASET type: "+p)}else if(0===r.indexOf("POINTS")){var v=parseInt(r.split(" ")[1],10),A=4*v*3;s=new Float32Array(3*v);for(var h=e.next,d=0;d<v;d++)s[3*d]=n.getFloat32(h,!1),s[3*d+1]=n.getFloat32(h+4,!1),s[3*d+2]=n.getFloat32(h+8,!1),h+=12;e.next=e.next+A+1}else if(0===r.indexOf("TRIANGLE_STRIPS")){var y=parseInt(r.split(" ")[1],10),c=parseInt(r.split(" ")[2],10),x=4*c;l=new Uint32Array(3*c-9*y);for(var b=0,w=e.next,I=0;I<y;I++){var g=n.getInt32(w,!1),m=[];w+=4;for(var T=0;T<g;T++)m.push(n.getInt32(w,!1)),w+=4;for(var D=0;D<g-2;D++)D%2?(l[b++]=m[D],l[b++]=m[D+2],l[b++]=m[D+1]):(l[b++]=m[D],l[b++]=m[D+1],l[b++]=m[D+2])}e.next=e.next+x+1}else if(0===r.indexOf("POLYGONS")){var O=parseInt(r.split(" ")[1],10),F=parseInt(r.split(" ")[2],10),C=4*F;l=new Uint32Array(3*F-9*O);for(var P=0,N=e.next,S=0;S<O;S++){var E=n.getInt32(N,!1),L=[];N+=4;for(var U=0;U<E;U++)L.push(n.getInt32(N,!1)),N+=4;for(var k=1;k<E-1;k++)l[P++]=L[0],l[P++]=L[k],l[P++]=L[k+1]}e.next=e.next+C+1}else if(0===r.indexOf("POINT_DATA")){var R=parseInt(r.split(" ")[1],10);e=f(a,e.next);var _=4*R*3;i=new Float32Array(3*R);for(var G=e.next,H=0;H<R;H++)i[3*H]=n.getFloat32(G,!1),i[3*H+1]=n.getFloat32(G+4,!1),i[3*H+2]=n.getFloat32(G+8,!1),G+=12;e.next=e.next+_}if((u=e.next)>=a.byteLength)break}var V=new o.u9r;return V.setIndex(new o.TlE(l,1)),V.setAttribute("position",new o.TlE(s,3)),i.length===s.length&&V.setAttribute("normal",new o.TlE(i,3)),V}(t)}}]),r}(o.aNw)}}]);