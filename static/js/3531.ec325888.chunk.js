"use strict";(self.webpackChunkezyvuefree=self.webpackChunkezyvuefree||[]).push([[3531],{91850:function(e,t,s){s.d(t,{Z:function(){return u}});var a=s(72791),r=s(85221),n=s(1413),i=s(35720),o=s(38302),c=s(63144),l=s(80184);function h(e){return(0,l.jsxs)(c.Z,{position:"relative",display:"inline-flex",children:[(0,l.jsx)(i.Z,(0,n.Z)({},e)),"determinate"===e.variant&&(0,l.jsx)(c.Z,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:(0,l.jsx)(o.Z,{variant:"caption",component:"div",color:"textSecondary",children:(0,l.jsx)("span",{style:{fontSize:e.fontSize},children:"".concat(Math.round(e.value),"%")})})})]})}var d=(0,s(38596).Z)((function(){return{backdrop:{zIndex:5,color:"white",backgroundColor:"rgb(255, 255, 255)"}}}));function u(e){var t=d();return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(r.Z,{className:t.backdrop,open:e.show,transitionDuration:{exit:1e3,enter:0,appear:0},children:(0,l.jsx)("div",{style:{textAlign:"center"},children:(0,l.jsx)(h,{variant:e.variant,color:"primary",value:e.value,size:85,fontSize:"24px"})})}),e.children]})}u.defaultProps={variant:"indeterminate",value:0}},32333:function(e,t,s){s.d(t,{Pl:function(){return a}});var a={MEMBER_ACCESS:1,CREATE_UPDATE_ASSET:2,DELETE_ASSET:3,ADMIN_ACCESS:4,MASTER_ADMIN_ACCESS:10,COUNT:5}},93531:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var a=s(74165),r=s(15861),n=s(93433),i=s(15671),o=s(43144),c=s(97326),l=s(60136),h=s(29388),d=s(72791),u=s(51345),p=s(91850),x=s(95094),g=s(56305),A=s(63727),v=s(91523),m=s(83837),j=s(20269),f=s(94026),w=s(95480),y=s(26513),b=s(41374),C=s(63681),k=s(52417),S=s(80184),Z=function(e){(0,l.Z)(s,e);var t=(0,h.Z)(s);function s(){return(0,i.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"render",value:function(){return(0,S.jsxs)("div",{className:"image-box",children:[(0,S.jsx)("a",{href:this.props.link,children:(0,S.jsx)("img",{alt:"",src:this.props.img})}),(0,S.jsx)("div",{className:"image-box-name",children:this.props.name})]})}}]),s}(d.Component),D=s(32333),E=["January","February","March","April","May","June","July","August","September","October","November","December"],P=function(e){(0,l.Z)(P,e);var t=(0,h.Z)(P);function P(e){var s;return(0,i.Z)(this,P),(s=t.call(this,e)).state={showLoadingOverlay:!1,showWelcome:!1,alertMessage:"",latestProjects:[],projects:[],selection:0,plan:{features:{viewReporting:!0}},subs:{},year:(new Date).getFullYear()},s.onProjectChange=s.onProjectChange.bind((0,c.Z)(s)),s.onWelcomeClosed=s.onWelcomeClosed.bind((0,c.Z)(s)),s.onYearChange=s.onYearChange.bind((0,c.Z)(s)),g.kL.register.apply(g.kL,(0,n.Z)(g.zX)),s}return(0,o.Z)(P,[{key:"componentWillUnmount",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.viewsChart&&this.viewsChart.destroy(),this.totalViewsChart&&this.totalViewsChart.destroy(),this.storageChart&&this.storageChart.destroy();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,s,r,n,i,o,c,l,h,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({showLoadingOverlay:!0}),e.prev=1,t=u.ZP.getAuthCookie()){e.next=6;break}return window.location="/account/login",e.abrupt("return");case 6:return e.next=8,x.Z.projectService.getProjects(t.storeAccountId);case 8:return s=e.sent,r=s.reverse().slice(0,4),e.next=12,x.Z.accountService.getById(u.ZP.getAuthCookie().storeAccountId);case 12:return this.account=e.sent,n=this.account.subscriptionHistory[this.account.subscriptionHistory.length-1],e.next=16,x.Z.planService.getById(n.planId);case 16:if(i=e.sent){e.next=19;break}throw new Error("plan not found");case 19:return o=t.permissions.find((function(e){return e.PermissionId===D.Pl.ADMIN_ACCESS})),e.next=22,this.getMonthlyTotals(null,(new Date).getFullYear());case 22:return c=e.sent,this.viewsChart=this.createViewsChart("chart",c),l=c[(new Date).getMonth()],e.next=27,x.Z.accountService.getStatus(t.storeAccountId);case 27:h=e.sent,(d=h.totalAssetSize/1e6)>i.features.maxAssetSize&&(d=i.features.maxAssetSize),this.setState({hasAdminAccess:o&&o.Granted,plan:i,subs:n,showWelcome:!this.account.welcomeDisabled,mbUsed:d.toFixed(2),totalViews:l,projects:s,latestProjects:r}),document.getElementById("storageChart")&&(this.storageChart=this.createDoughnutChart("storageChart","",d,i.features.maxAssetSize-d)),this.totalViewsChart=this.createDoughnutChart("totalViewsChart","",l,i.features.maxViews-l),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),console.error(e.t0),this.displayMessage("An error occured. Please try again","error");case 39:return e.prev=39,this.setState({showLoadingOverlay:!1}),e.finish(39);case 42:case"end":return e.stop()}}),e,this,[[1,35,39,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"onProjectChange",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.value>0?this.state.projects[t.target.value-1]:null,e.next=3,this.getMonthlyTotals(s?s._id:null,this.state.year);case 3:r=e.sent,this.bindMonthlyTotals(r,s?s.Name:"All Models"),this.setState({selection:t.target.value});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onYearChange",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.state.selection>0?this.state.projects[this.state.selection-1]:null,e.next=3,this.getMonthlyTotals(s?s._id:null,t.target.value);case 3:r=e.sent,this.bindMonthlyTotals(r,s?s.Name:"All Models"),this.setState({year:t.target.value});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonthlyTotals",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,s){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[0,0,0,0,0,0,0,0,0,0,0,0],e.next=3,x.Z.projectService.getProjectViews(this.account._id,t,s);case 3:return e.sent.forEach((function(e){var t=parseInt(e._id);r[t]=e.total})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"bindMonthlyTotals",value:function(e,t){this.viewsChart.data.datasets[0].data=e,this.viewsChart.data.datasets[0].label=t,this.viewsChart.update()}},{key:"createDoughnutChart",value:function(e,t,s,a){var r={type:"doughnut",data:{datasets:[{backgroundColor:["#bbb","#eee"],borderColor:"#aaa",data:[s,a]}]},options:{responsive:!0,maintainAspectRatio:!0}};return new g.kL(document.getElementById(e),r)}},{key:"createViewsChart",value:function(e,t){var s={type:"bar",data:{labels:E,datasets:[{label:"All projects",backgroundColor:"orange",borderColor:"orange",data:t}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"#fff"}},y:{ticks:{precision:0},grid:{color:"#ccc"}}}}};return new g.kL(document.getElementById(e),s)}},{key:"onWelcomeClosed",value:function(){this.state.doNotShowChecked&&(this.account.welcomeDisabled=!0,x.Z.accountService.update(this.account)),this.setState({showWelcome:!1})}},{key:"displayMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.setState({alertMessage:e,alertType:t})}},{key:"renderWelcomeMessage",value:function(){var e=this;return(0,S.jsxs)(m.Z,{fullWidth:!1,maxWidth:"md",open:this.state.showWelcome,children:[(0,S.jsxs)(f.Z,{children:[(0,S.jsx)("h2",{style:{textAlign:"center"},children:"Welcome to Ezyvue"}),(0,S.jsx)("h3",{children:"Add 3d models to your website in a few easy steps"}),"Here are a few links to the ",(0,S.jsx)("a",{href:"/help",children:"help center"})," to get you started:",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),(0,S.jsxs)("ul",{children:[(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"".concat("https://www.ezyvue.com","/help/uploading"),target:"_blank",rel:"noopener noreferrer",children:"Creating a new project"})}),(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"".concat("https://www.ezyvue.com","/help/projectDetails"),target:"_blank",rel:"noopener noreferrer",children:"Viewing, editing and publishing a project"})}),(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"".concat("https://www.ezyvue.com","/help/editing"),target:"_blank",rel:"noopener noreferrer",children:"Using Ezyvue Studio"})}),(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"".concat("https://www.ezyvue.com","/help/viewer"),target:"_blank",rel:"noopener noreferrer",children:"Using the Web Viewer"})})]}),(0,S.jsx)("br",{}),(0,S.jsx)(b.Checkbox,{checked:this.state.doNotShowChecked,onChange:function(t,s){return e.setState({doNotShowChecked:s})}}),"Don't show this dialog again"]}),(0,S.jsx)(j.Z,{children:(0,S.jsx)(y.Z,{onClick:this.onWelcomeClosed,children:(0,S.jsx)("span",{children:"OK"})})})]})}},{key:"render",value:function(){var e=[],t=(new Date).getFullYear(),a="";if(this.state.subs.expiryDate){var r=(0,C.Z)(new Date(this.state.subs.expiryDate),new Date)+1;a=r>0?"Your trial expires in ".concat(r," days"):"Your trial expires today"}for(var n=2021;n<=t;++n)e.push(n);return(0,S.jsxs)(p.Z,{variant:"indeterminate",show:this.state.showLoadingOverlay,value:this.state.progress,children:[this.renderWelcomeMessage(),(0,S.jsxs)("div",{className:"std-page center-page-x center",children:[(0,S.jsx)("h1",{children:"Dashboard"}),(0,S.jsxs)("div",{className:"plan-box-container",children:[(0,S.jsx)("div",{className:"plan-box",children:(0,S.jsxs)("div",{style:{margin:"auto"},children:[(0,S.jsx)("img",{src:s(20829),alt:"",style:{display:"block",margin:"10px auto"}}),(0,S.jsx)(v.rU,{to:"/contact",children:"Leave feedback"})]})}),(0,S.jsx)("div",{className:"plan-box",children:(0,S.jsxs)("div",{style:{margin:"auto"},children:[(0,S.jsx)("img",{src:s(20373),alt:"",style:{display:"block",margin:"10px auto"}}),(0,S.jsx)(v.rU,{to:"/contact",children:"Feature request"})]})}),(0,S.jsxs)("div",{className:"plan-box",children:[(0,S.jsxs)("div",{style:{fontSize:"large",margin:"auto"},children:[this.state.plan.name," plan"]}),(0,S.jsx)("div",{className:"primary-text-col",children:this.state.subs.expiryDate?(0,S.jsxs)("div",{children:[a,(0,S.jsx)("br",{}),this.state.hasAdminAccess&&(0,S.jsx)(v.rU,{to:"/account/purchasePlan",children:"Upgrade plan"})]}):(0,S.jsx)("div",{children:this.state.plan.isUpgradeable&&(0,S.jsx)(v.rU,{to:"/account/purchasePlan",children:"Upgrade plan"})})})]})]}),(0,S.jsx)("div",{className:"page-box",children:(0,S.jsxs)("div",{className:"flexcol",style:{margin:"25px 0"},children:[this.state.latestProjects.length>0&&(0,S.jsxs)(d.Fragment,{children:[(0,S.jsx)("h2",{children:"Latest projects"}),(0,S.jsxs)("div",{className:"flexrow",children:[this.state.latestProjects.map((function(e,t){var s="".concat("https://www.ezyvue.com/file-service/api","/files/images/modelplaceholder.jpg");return e.ThumbnailFileMetadata&&(s="".concat("https://www.ezyvue.com/file-service/api","/files/").concat(e.AssetPath,"/thumbnail.jpg")),(0,S.jsx)(Z,{link:"/manageProject?id=".concat(e._id),img:s,name:e.Name},t)})),(0,S.jsx)(v.rU,{style:{marginLeft:"10px"},to:"/projectManager",children:"view all"})]})]}),0===this.state.latestProjects.length&&(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{children:"My Projects"}),"You don't have any projects at the moment.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),(0,S.jsx)(v.rU,{to:"/uploadProjectAssets",children:(0,S.jsx)(y.Z,{variant:"contained",color:"primary",size:"large",disabled:this.state.uploadDisabled,startIcon:(0,S.jsx)(k.Z,{fontSize:"large",style:{color:"black"}}),children:"Create a New Project"})})]})]})}),(0,S.jsxs)("div",{className:"page-box",children:[(0,S.jsx)("h2",{children:"Views"}),(0,S.jsx)("h3",{children:"Views this month"}),this.state.plan.features.maxViews>0&&(0,S.jsxs)("div",{className:"doughnut-container",children:[E[(new Date).getMonth()]," ",this.state.totalViews,"\xa0/\xa0",this.state.plan.features.maxViews,"\xa0",(0,S.jsx)("br",{}),(0,S.jsx)("canvas",{id:"totalViewsChart"})]}),this.state.plan.features.viewReporting&&(0,S.jsxs)("div",{className:"flexcol",style:{margin:"25px 0"},children:[(0,S.jsx)("h3",{children:"Views by month"}),(0,S.jsx)("div",{className:"chart-container",children:(0,S.jsx)("canvas",{id:"chart"})}),(0,S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",margin:"20px 0"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)(w.Z,{children:"Project"}),(0,S.jsxs)(A.Z,{value:this.state.selection,onChange:this.onProjectChange,style:{minWidth:"200px",marginRight:"25px"},children:[(0,S.jsx)("option",{value:0,children:"All"}),this.state.projects.map((function(e,t){return(0,S.jsx)("option",{value:t+1,style:{maxWidth:"280px"},children:e.Name},t)}))]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)(w.Z,{children:"Year"}),(0,S.jsx)(A.Z,{value:this.state.year,onChange:this.onYearChange,style:{minWidth:"200px"},children:e.map((function(e,t){return(0,S.jsx)("option",{value:e,children:e},t)}))})]})]})]})]}),(0,S.jsx)("div",{className:"page-box",children:(0,S.jsxs)("div",{className:"flexcol",style:{margin:"25px 0"},children:[(0,S.jsx)("h3",{children:"Usage"}),this.state.plan.features.maxAssetSize>0&&(0,S.jsxs)("div",{className:"doughnut-container",children:["Storage used: ",this.state.mbUsed,"\xa0MB\xa0/\xa0",this.state.plan.features.maxAssetSize,"\xa0MB",(0,S.jsx)("br",{}),(0,S.jsx)("canvas",{id:"storageChart"})]})]})}),(0,S.jsx)("br",{})]})]})}}]),P}(d.Component)},20829:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAjCAYAAAD17ghaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALOSURBVFhHvZfbqw1RHMc3Si4PPJ2EErnUcSv3W64JT4gnygt58aCU/AMeJC+8KvJCyQNKSRFSQm6hE8XJ/Z5bx/04Pt+19hpr1t4ze/bYM5/67L1mzWWtWes3a35TKZH5+BTnmq2SmYofsQe/4EIsjXZ8i2rc2YVLsdJLPx59cDy2YbgvjSv42RZjjMKLOMxsxfmOa23RshE1R35Ps/gE+2LIUHyI9c5xdrq73I3b8ReewUeoA7JwFk/aYoxLmBZwH3CRCstQjT3DiapoETPQBV6oAnE2Gk6jKk1QtIDowjALP6Hf+DdcghE64BU2E3RpPMDNtmiYgwpQNf4TV2KMP3jPFv+b3qg77EYFtWMeajrWmy0P3bU60IF6/HxGYljn8x4v22LEEHxpi+a6m/Cg2bKP9htbjJM0AtfRn7tQnadO+kxH/5jfuAETSRsBPSJ+QIVoBPajzneswQOozl+rehW1ViSSNAJ5GICKg8w0dXAGvqI/IvXQNB1CE5BpU6BFaYotZuIdnrLFVDRNx3AfblVF0hTcRD+gsjgCG6EO6Ni92kgbgWlVs6IR0J01IvMIFEVsBFodhE2TNgVaw2faYi60HB9GTY1P5im4gX6A5XEbhtQEod5Qj3GMKjzG4WRbzIVGQK965X8+NSNwF7VmK4Uqg5og1DwpGVWF/otmUPU/Quu3RkG9uoCrcBKOxSI4gdEIODT8SiK1w1edaSVb0F07CkKHyitQSepinIDr8AiGDEbtq5eO16M/6roLzJZFmfgOW6xlD6qXy83WP9RJvcVeoLuTvK7GRJRU6CCl1g59Yp3D8EJ51FszNeCPow4cjQNxF/6o1vkqK9KCdQfvYyc+R30LKttWfqDzlKhqn66rEWz4tOlpUAPKbLVIhQ3fQiWceoIaocaafufojsJGtWIeRX3nF44+01zDr3EnDsfSOI+3USl1P1UUQ6XyF2dpG4AGlZLAAAAAAElFTkSuQmCC"},20373:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANZSURBVFhHtZdZqI5bGMdfwzHP8yyZ7kSGokS5kAsZikwXomTIVMKNMqQkx0mGIolj6siFXCnuDIWIQhGHo20uZJ4Ofr+1v9X+7L53f5P9r19rPet733dNz/Os9dVLytdwuAV14awNxciXytVIaA7DglWkcg2gHyyAhsHKr/aZ8kWmLEq5BvAX7IJ/4A8b8igO9EmmLFsT4Cv8gEM25FFnWA5tgpWu/nAc3LK8mgX/w1v4HX7SFG6Ak9ptQ1SdTJlLI+ADXAtWlXS40TAAWsMn+BfOwR3Ipb0wF17BYLgPRasD7IT34ExycRWmQfWJOfvvMDFYJcgZPwc7uQLLwPjvA67EVNgH78BnzkBHiOoGJYWpGgUf4Q3MhJq2zZB0IA7iLnSFstQOnoKdD7GhmnSuVpXVX7QIXPKLUEgop2oLOJvZwaqU6btLZTW5DXbkTKuvTHx3abBKUGN4DTchOxT/Br35MHwGO7Huvps34vnSBExODyA1lP3BB/tCL9DTo3S8lnAAnGVUI3DZW8BkGJ+pjwHfsa4MYQfWEwy9VBk6ziIyB9Qa0NbbozwnDsIpyF5y67btCVaVHJzfmB+sJOkB28GBnYQlkJyAb2Dms5wBagf4siGkzPk+Y5thV122mcL/g+h4A8Hn1wYrSdaDdqTCLTA5+HG3ohkcAeXHVINMaeeXwKXN5dm21QfPhrg68bn4LdPwJtgAK2ESpErvdZTjglUlT8rzEAemrF+AbaDfRHmm+A3zR9EaCr7s8RzVFowA212NeRms23YasnUUdGAdsWi5PffAFOz2KJfW+DbctoKduiWboQL+hCg79aA6G6wSpZfaybpg/apO4HF9OVhVg4zSuX13bLBKlHvrSfYFssMxyhXJDseohWDnx4JVpgwll/khxCRTk7xHmCE98/PdkgqWh4sz2hisdHkmmH69Mwyy4XfJ/O5t5yV4RihXwxTuHW8KLIYYDSWFXT6tAD/+CGq6FZlBC1YuB0pTdzDOdUjvCJFnWXX/G3h6mjULUjEDiDK9elExDCNev2J9FXge1IpWQ/zPkEZvKFjFroDO5j8mr2jZSx+3wgjYDw6kVuTyew9MU+rNJ02l+IA3Xy8Y2T4ghqhp17LWNR2ugxeYx+CJmet2nEdJ8hP1U89lRerrAAAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=3531.ec325888.chunk.js.map